# åœ¨çº¿å®¢æœèŠå¤©ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Next.js å’Œ Socket.io çš„å®æ—¶åœ¨çº¿å®¢æœèŠå¤©ç³»ç»Ÿï¼Œæ”¯æŒåŒè§’è‰²èº«ä»½ï¼ˆå®¢æœä¸å®¢æˆ·ï¼‰ï¼Œç•Œé¢è®¾è®¡å‚è€ƒå¾®ä¿¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **åŒè§’è‰²æ”¯æŒ**ï¼šå®¢æˆ·å’Œå®¢æœä¸¤ç§èº«ä»½
- **å®æ—¶é€šä¿¡**ï¼šåŸºäº WebSocket çš„å®æ—¶æ¶ˆæ¯æ”¶å‘
- **ä¼šè¯ç®¡ç†**ï¼šæ”¯æŒå¤šä¼šè¯åˆ‡æ¢å’Œç®¡ç†
- **åœ¨çº¿çŠ¶æ€**ï¼šå®æ—¶æ˜¾ç¤ºç”¨æˆ·åœ¨çº¿/ç¦»çº¿çŠ¶æ€
- **æ¶ˆæ¯çŠ¶æ€**ï¼šå‘é€ä¸­ã€å·²å‘é€ã€å·²é€è¾¾ã€å·²è¯»çŠ¶æ€
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒ PC ç«¯å’Œç§»åŠ¨ç«¯

### ğŸ‘¥ ç”¨æˆ·è§’è‰²

#### å®¢æˆ·

- æ— éœ€ç™»å½•ï¼Œè¾“å…¥æ˜µç§°å³å¯ä½¿ç”¨
- æœç´¢æŒ‡å®šå®¢æœå¹¶å¼€å§‹å¯¹è¯
- æŸ¥çœ‹å®¢æœåœ¨çº¿çŠ¶æ€
- æ”¯æŒå¤šå®¢æœä¼šè¯

#### å®¢æœ

- éœ€è¦è´¦å·å¯†ç ç™»å½•
- æŸ¥çœ‹æ‰€æœ‰å®¢æˆ·ä¼šè¯
- å®æ—¶æ¥æ”¶å®¢æˆ·æ¶ˆæ¯
- æ”¯æŒå¤šå®¢æˆ·åŒæ—¶æœåŠ¡

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šNext.js 15, React 19, TypeScript
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **æ ·å¼**ï¼šTailwind CSS
- **å®æ—¶é€šä¿¡**ï¼šSocket.io
- **å›¾æ ‡**ï¼šLucide React
- **åç«¯**ï¼šNext.js API Routes + Socket.io

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆåŒ…å«å‰ç«¯å’ŒSocket.ioåç«¯ï¼‰
npm run dev
```

### 3. è®¿é—®åº”ç”¨

- **å®¢æˆ·å…¥å£**ï¼šhttp://localhost:3000
- **å®¢æœå…¥å£**ï¼šhttp://localhost:3000/admin
- **ç§»åŠ¨ç«¯**ï¼šhttp://localhost:3000/chat/mobile
- **Socket.io**ï¼šhttp://localhost:3000/api/socket

## ä½¿ç”¨è¯´æ˜

### å®¢æˆ·ä½¿ç”¨æµç¨‹

1. è®¿é—®é¦–é¡µï¼Œè¾“å…¥æ‚¨çš„æ˜µç§°
2. æœç´¢å®¢æœï¼ˆè¾“å…¥å®¢æœ ID æˆ–å§“åï¼‰
3. ç³»ç»Ÿè‡ªåŠ¨è·³è½¬åˆ°èŠå¤©ç•Œé¢
4. å¼€å§‹ä¸å®¢æœå¯¹è¯

### å®¢æœä½¿ç”¨æµç¨‹

1. è®¿é—® `/admin` é¡µé¢
2. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•ï¼š
   - å·¥å·ï¼šA001ï¼Œå¯†ç ï¼š123456ï¼ˆå¼ ä¸‰ï¼‰
   - å·¥å·ï¼šA002ï¼Œå¯†ç ï¼š123456ï¼ˆæå››ï¼‰
   - å·¥å·ï¼šA003ï¼Œå¯†ç ï¼š123456ï¼ˆç‹äº”ï¼‰
3. ç™»å½•æˆåŠŸåè¿›å…¥å®¢æœå·¥ä½œå°
4. ç­‰å¾…å®¢æˆ·è”ç³»æˆ–ä¸»åŠ¨æŸ¥çœ‹ä¼šè¯

## é¡¹ç›®ç»“æ„

```
online-chat/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx           # å®¢æˆ·å…¥å£é¡µé¢
â”‚   â”œâ”€â”€ admin/             # å®¢æœç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ chat/              # èŠå¤©ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx       # PCç«¯èŠå¤©ç•Œé¢
â”‚   â”‚   â””â”€â”€ mobile/        # ç§»åŠ¨ç«¯èŠå¤©ç•Œé¢
â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ pages/                 # Next.js Pages Router
â”‚   â””â”€â”€ api/               # APIè·¯ç”±
â”‚       â””â”€â”€ socket.ts      # Socket.ioæœåŠ¡å™¨
â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â””â”€â”€ chat/             # èŠå¤©ç›¸å…³ç»„ä»¶
â”œâ”€â”€ lib/                  # å·¥å…·å‡½æ•°
â”œâ”€â”€ store/                # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ public/               # é™æ€èµ„æº
```

## æ ¸å¿ƒç»„ä»¶

- **MessageBubble**ï¼šæ¶ˆæ¯æ°”æ³¡ç»„ä»¶
- **ConversationList**ï¼šä¼šè¯åˆ—è¡¨ç»„ä»¶
- **MessageInput**ï¼šæ¶ˆæ¯è¾“å…¥ç»„ä»¶
- **AgentListModal**ï¼šå®¢æœåˆ—è¡¨æ¨¡æ€æ¡†

## æ•°æ®æ¨¡å‹

### ç”¨æˆ·

```typescript
interface CurrentUser {
  id: string;
  name: string;
  role: "client" | "agent";
  isOnline: boolean;
}
```

### æ¶ˆæ¯

```typescript
interface Message {
  id: string;
  conversationId: string;
  senderId: string;
  content: string;
  timestamp: string;
  status: "sending" | "sent" | "delivered" | "read";
}
```

### ä¼šè¯

```typescript
interface Conversation {
  id: string;
  agentId: string;
  clientId: string;
  updatedAt: string;
  unreadCount: number;
}
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `types/index.ts` ä¸­å®šä¹‰ç›¸å…³ç±»å‹
2. åœ¨ `store/chatStore.ts` ä¸­æ·»åŠ çŠ¶æ€ç®¡ç†
3. åœ¨ `components/` ä¸­åˆ›å»ºç›¸å…³ç»„ä»¶
4. åœ¨ `server/index.js` ä¸­æ·»åŠ  Socket äº‹ä»¶å¤„ç†

### è‡ªå®šä¹‰æ ·å¼

é¡¹ç›®ä½¿ç”¨ Tailwind CSSï¼Œå¯ä»¥åœ¨ `app/globals.css` ä¸­æ·»åŠ è‡ªå®šä¹‰æ ·å¼ã€‚

### éƒ¨ç½²

1. æ„å»ºé¡¹ç›®ï¼š`npm run build`
2. å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨ï¼š`npm start`
3. Socket.io æœåŠ¡å™¨ä¼šè‡ªåŠ¨éš Next.js ä¸€èµ·è¿è¡Œ

## æµ‹è¯•è´¦å·

### å®¢æœè´¦å·

- å·¥å·ï¼šA001ï¼Œå¯†ç ï¼š123456ï¼ˆå¼ ä¸‰ï¼‰
- å·¥å·ï¼šA002ï¼Œå¯†ç ï¼š123456ï¼ˆæå››ï¼‰
- å·¥å·ï¼šA003ï¼Œå¯†ç ï¼š123456ï¼ˆç‹äº”ï¼‰

## è®¸å¯è¯

MIT License
